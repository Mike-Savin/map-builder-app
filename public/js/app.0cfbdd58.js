var topNewsApp=angular.module("topNewsApp",["LocalStorageModule","ngAnimate","ngSanitize","ngSails","ngToast","pascalprecht.translate","restangular","threejs","ui.router","validation","validation.rule"]),angularLocalStorage=function(a){a.setPrefix("mapBuilder")};angularLocalStorage.$inject=["localStorageServiceProvider"],topNewsApp.config(angularLocalStorage);var enableAnimation=function(a){a.classNameFilter(/ng-toast/)};enableAnimation.$inject=["$animateProvider"],topNewsApp.config(enableAnimation);var ngToast=function(a){a.configure({animation:"slide",dismissButton:!0,timeout:5e3})};ngToast.$inject=["ngToastProvider"],topNewsApp.config(ngToast);var restangular=function(a,b){b.setBaseUrl(a.url)};topNewsApp.config(restangular);var router=function(a,b){b.otherwise("/users/maps/index"),a.state("users",{url:"/users","abstract":!0,template:"<div ui-view></div>"}).state("users.new",{url:"/new",controller:"UsersNewCtrl",templateUrl:"views/users/new.html",authState:!1}).state("users.edit",{url:"/edit",controller:"UsersEditCtrl",templateUrl:"views/users/edit.html",authState:!0}).state("users.sessions",{url:"/sessions","abstract":!0,template:"<div ui-view></div>"}).state("users.sessions.new",{url:"/new",controller:"UsersSessionsNewCtrl",templateUrl:"views/users/sessions/new.html",authState:!1}).state("users.passwords",{url:"/passwords","abstract":!0,template:"<div ui-view></div>"}).state("users.passwords.new",{url:"/new",controller:"UsersPasswordsNewCtrl",templateUrl:"views/users/passwords/new.html"}).state("users.maps",{url:"/maps","abstract":!0,template:"<div ui-view></div>"}).state("users.maps.index",{url:"/index",controller:"UsersMapsIndexCtrl",templateUrl:"views/users/maps/index.html",authState:!0}).state("users.maps.show",{url:"/:id",controller:"UsersMapsShowCtrl",templateUrl:"views/users/maps/show.html",authState:!0})};router.$inject=["$stateProvider","$urlRouterProvider"],topNewsApp.config(router);var sails=function(a,b){a.url=b.url};sails.$inject=["$sailsProvider","API"],topNewsApp.config(sails);var restangular=function(a){a.translations("en",{SERVER:{ERROR:{PASSWORD:{TOO_SHORT:"Password should contain at least 8 characters",INVALID:"Please provide valid password"},EMAIL:{EXISTS:"Email already exists",INVALID:"Email is invalid",REQUIRED:"Email is required",NOT_FOUND:"Email was not found"}}}}),a.preferredLanguage("en")};restangular.$inject=["$translateProvider"],topNewsApp.config(restangular);var validation=function(a){a.showSuccessMessage=!1,a.showErrorMessage=!1};topNewsApp.config(validation);var API={baseUrl:"https://mapbuilderapp.herokuapp.com",url:"https://mapbuilderapi.herokuapp.com"};topNewsApp.constant("API",API);var policy=function(a,b,c,d){a.$state=b,a.$stateParams=c,a.$on("$stateChangeStart",function(a,b,c,e,f){d.checkAccess(a,b,c,e,f)})};policy.$inject=["$rootScope","$state","$stateParams","currentUser"],topNewsApp.run(policy);var setHeaders=function(a,b){var c=a.get();c&&b.setDefaultHeaders({"access-token":c.accessToken})};setHeaders.$inject=["currentUser","Restangular"],topNewsApp.run(setHeaders);var Map=function(a){var b=function(a){Object.keys(a).foeEach(function(b){this.key=a[b]})};return b.prototype={},b.create=function(b){return a.all("users").all("maps").post(b).then(function(a){return a})},b.update=function(b,c){return a.all("users").one("maps",b).put(c).then(function(a){return a})},b.index=function(){return a.all("users").all("maps").getList().then(function(a){return a.plain()})},b.show=function(b){return a.all("users").one("maps",b).get().then(function(a){return a.plain()})},b};Map.$inject=["Restangular"],topNewsApp.factory("Map",Map);var User=function(a,b){var c=function(a){Object.keys(a).foeEach(function(b){this.key=a[b]})};return c.create=function(c){return a.all("users").post(c).then(function(a){var c=a.plain();return b.set(c),c})},c.signIn=function(c){return a.all("users").all("sessions").post(c).then(function(a){var c=a.plain();return b.set(c),c})},c.updatePassword=function(b){return a.all("users").all("passwords").all("new").customGET("",{email:b}).then(function(a){return a&&a.plain?a.plain():a})},c.signOut=function(){b.clear()},c.getCollections=function(b){return a.one("user",b).all("collections").getList().then(function(a){return a.plain()})},c};User.$inject=["Restangular","currentUser"],topNewsApp.factory("User",User);var currentUser=function(a,b,c,d){var e={get:function(){return b.get("currentUser")},set:function(a){b.set("currentUser",a),d.setDefaultHeaders({"access-token":a.accessToken})},clear:function(){b.remove("currentUser"),d.setDefaultHeaders({"access-token":""})},checkAccess:function(b,d,f,g,h){var i=a.get("$rootScope").$state,j=!!e.get();void 0!==d.authState&&j!==d.authState&&(b.preventDefault(),d.authState?(c.set(d.name),i.go("users.sessions.new")):i.go("users.maps.index",{id:e.get().id}))}};return e};currentUser.$inject=["$injector","localStorageService","requestedState","Restangular"],topNewsApp.factory("currentUser",currentUser);var requestedState=function(a){return{get:function(){return a.get("requestedState")},set:function(b){a.set("requestedState",b)},clear:function(){a.remove("requestedState")}}};requestedState.$inject=["localStorageService"],topNewsApp.factory("requestedState",requestedState);var validation=function(a,b){var c={message:function(d,e){return e.constructor===Array?e.forEach(function(a){c.message(d,a)}):void b[d]({content:a("translate")(e)})},success:function(a){c.message("success",a)},danger:function(a){c.message("danger",a)}};return c};validation.$inject=["$filter","ngToast"],topNewsApp.factory("validation",validation);var footer=function(){return{restrict:"E",scope:{},templateUrl:"views/partials/_footer.html"}};topNewsApp.directive("footer",footer);var header=function(){return{restrict:"E",templateUrl:"views/partials/_header.html",controller:["$scope","$state","User",function(a,b,c){a.signOut=function(){c.signOut()}}]}};topNewsApp.directive("header",header);var threejsScene=function(a,b,c){return{restrict:"EA",scope:{width:"=",height:"=",points:"="},link:function(b,d,e){c.load().then(function(e){b.container=d[0],b.renderer=c.getRenderer(),b.cameraShift=0,b.cameraOffset=400,b.rotation=0,b.coordinatesFactor=10,b.pointRadius=1;var f;b.init=function(){b.renderer.setSize(b.width,b.height),b.container.appendChild(b.renderer.domElement),b.scene=new e.Scene,b.addCamera({x:b.cameraOffset,y:b.cameraOffset,z:b.cameraOffset}),b.addAxes(300),b.addPlane({x:0,z:0,color:16119285}),b.drawPoints(),b.addLight({x:-400,y:800,z:-100}),b.renderer.setClearColor(16382457,1)},b.addPlane=function(a){a||(a={});var c={x:0,y:0,z:0,color:13421772,width:500,height:500};angular.extend(c,a);var d=new e.PlaneBufferGeometry(c.height,c.width),f=new e.MeshLambertMaterial({color:c.color}),g=new e.Mesh(d,f);g.rotation.x=-.5*Math.PI,g.position.x=c.x,g.position.y=c.y,g.position.z=c.z,b.scene.add(g)},b.addSphere=function(a){a||(a={});var c={x:0,y:0,color:16711680,radius:10};angular.extend(c,a);var d=new e.SphereGeometry(c.radius,20,20),f=new e.MeshLambertMaterial({color:c.color}),g=new e.Mesh(d,f);c.name&&(g.name=c.name),g.position.x=c.x,g.position.y=c.y,g.position.z=c.z,b.scene.add(g)},b.addCamera=function(a){a||(a={});var c={x:0,y:0,z:0,angle:45,near:.1,far:1e4};angular.extend(c,a),b.camera=new e.PerspectiveCamera(c.angle,b.width/b.height,c.near,c.far),b.camera.position.y=400,b.scene.add(b.camera)},b.addLight=function(a){a||(a={});var c={x:0,y:0,z:0,color:16777215};angular.extend(c,a);var d=new e.PointLight(c.color);d.position.set(c.x,c.y,c.z),b.scene.add(d)},b.addAxes=function(a){a=a||20;var c=new e.AxisHelper(a);b.scene.add(c)},b.drawPoints=function(){b.points.forEach(function(a){var c,d=b.scene.getObjectByName(a.id);c=0===a.type?16711680:3368601,d&&b.scene.remove(d),b.addSphere({x:a.x*b.coordinatesFactor,y:b.pointRadius/2,z:a.y*b.coordinatesFactor,radius:b.pointRadius,color:c,name:a.id})})},b.$watchCollection("points",function(){b.drawPoints(b.points)}),a.$on("$stateChangeStart",function(){cancelAnimationFrame(f)}),angular.element(document).bind("keydown",function(a){37===a.which?b.cameraShift=-1:39===a.which?b.cameraShift=1:38===a.which?b.cameraOffset>100&&(b.cameraOffset-=10):40===a.which&&(b.cameraOffset+=10)}),angular.element(document).bind("keyup",function(a){(37===a.which||39===a.which)&&(b.cameraShift=0),a.preventDefault()}),b.animate=function(){f=requestAnimationFrame(b.animate),b.render()},b.render=function(){var a=Math.sqrt(2*Math.pow(b.cameraOffset,2));b.rotation+=.05*b.cameraShift,b.camera.position.x=Math.sin(b.rotation)*a,b.camera.position.z=Math.cos(b.rotation)*a,b.camera.position.y=b.cameraOffset,b.camera.lookAt(b.scene.position),b.renderer.render(b.scene,b.camera,null,!0)},b.init(),b.animate()})}}};threejsScene.$inject=["$rootScope","$window","THREEService"],topNewsApp.directive("threejsScene",threejsScene);var UsersCollectionsIndexCtrl=function(a,b,c,d,e){a.user=d.get(),a.collections=[],a.sources=[],e.getCollections(a.user.id).then(function(b){console.log(b),a.collections=b,a.setSources(b)}),a.setSources=function(b){a.sources=[],b.forEach(function(b){b.sources.forEach(function(b){a.sources.push(b)})})},a.selectCollection=function(b){a.selectedCollection=b.id,a.setSources([b])}};UsersCollectionsIndexCtrl.$inject=["$scope","$state","validation","currentUser","User"],topNewsApp.controller("UsersCollectionsIndexCtrl",UsersCollectionsIndexCtrl);var UsersEditCtrl=function(a,b,c){};UsersEditCtrl.$inject=["$scope","$state","$stateParams"],topNewsApp.controller("UsersEditCtrl",UsersEditCtrl);var UsersMapsIndexCtrl=function(a,b,c,d,e){a.user=c.get(),a.maps=a.user.maps,a.map={},e.index().then(function(b){a.maps=b}),a.createMap=function(){e.create(a.map).then(function(a){b.go("users.maps.show",{id:a})},function(a){d.danger(a.data.error)})}};UsersMapsIndexCtrl.$inject=["$scope","$state","currentUser","validation","Map"],topNewsApp.controller("UsersMapsIndexCtrl",UsersMapsIndexCtrl);var UsersMapsShowCtrl=function(a,b,c,d,e,f,g){a.user=e.get(),a.map={},a.points=[],a.id=d.id,a.id||c.go("users.maps.index"),g.show(a.id).then(function(c){a.map=c,a.points=c.points||[],b.on("maps/"+a.map.id+"/update",function(b){console.log("received: ",b),a.points.push(b)})}),a.stop=function(){g.update(a.id,{active:!1}).then(function(b){200===b&&(f.success("Map saved"),a.map.active=!1)})}};UsersMapsShowCtrl.$inject=["$scope","$sails","$state","$stateParams","currentUser","validation","Map"],topNewsApp.controller("UsersMapsShowCtrl",UsersMapsShowCtrl);var UsersNewCtrl=function(a,b,c,d){a.user={},a.submit=function(){d.create(a.user).then(function(a){a&&(c.success("Welcome to Map builder app!"),b.go("users.maps.index"))},function(a){console.log(a),c.danger(a.data.error)})}};UsersNewCtrl.$inject=["$scope","$state","validation","User"],topNewsApp.controller("UsersNewCtrl",UsersNewCtrl);var UsersPasswordsNewCtrl=function(a,b,c,d){a.user={},a.submit=function(){d.updatePassword(a.user.email).then(function(){c.success("Update password link has been successfully sent to your email")},function(a){c.danger(a.data.error)})}};UsersPasswordsNewCtrl.$inject=["$scope","$state","validation","User"],topNewsApp.controller("UsersPasswordsNewCtrl",UsersPasswordsNewCtrl);var UsersSessionsNewCtrl=function(a,b,c,d,e){a.user={},a.submit=function(){e.signIn(a.user).then(function(a){var e=d.get()||"users.maps.index";d.clear(),b.go(e),c.success("You have successfully log in")},function(a){c.danger(a.data.error)})}};UsersSessionsNewCtrl.$inject=["$scope","$state","validation","requestedState","User"],topNewsApp.controller("UsersSessionsNewCtrl",UsersSessionsNewCtrl),angular.element(document).ready(function(){angular.bootstrap(document,["topNewsApp"])}),function(){"use strict";function a(a,b,c,d){function e(){h=window.WebGLRenderingContext?new THREE.WebGLRenderer({alpha:!0,antialias:!0}):new THREE.CanvasRenderer({alpha:!0}),h.setPixelRatio(window.devicePixelRatio)}function f(){h||e(),a.log("THREE.js loaded OK!"),d.$apply(function(){i.resolve(window.THREE)})}function g(){h.enableScissorTest(!1),h.setClearColor(0,0)}var h,i=c.defer(),j=b[0].createElement("script");j.type="text/javascript",j.async=!0;var k=!0;k?j.src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r71/three.min.js":j.src="assets/js/three.min.js",j.onreadystatechange=function(){"complete"==this.readyState&&f()},j.onload=f;var l=b[0].getElementsByTagName("body")[0];return l.appendChild(j),{load:function(){return a.log("THREE.js loading..."),i.promise},getRenderer:function(){return g(),h}}}angular.module("threejs",[]),angular.module("threejs").factory("THREEService",a),a.$inject=["$log","$document","$q","$rootScope"]}(),function(){"use strict";function a(a,b,c,d){var e={loaded:[]};return{load:function(b){var d=this,f=[];return angular.forEach(b,function(a,b){for(var c=!0,g=e.loaded.length-1;g>=0;g--)e.loaded[b]==a&&(c=!1);if(c){var h=d.add(a);f.push(h)}}),c.all(f).then(function(b){return b.length>0&&a.info("THREE.js plugins loaded: "+b),window.THREE})},add:function(f){function g(){d.$apply(function(){e.loaded.push(f),a.debug(e.loaded),h.resolve(f)})}var h=c.defer(),i=b[0].createElement("script");i.type="text/javascript",i.src="assets/js/"+f+".js",i.async=!0,i.onreadystatechange=function(){"complete"==this.readyState&&g()},i.onload=g;var j=b[0].getElementsByTagName("body")[0];return j.appendChild(i),h.promise},remove:function(b){angular.forEach(e.loaded,function(c,d){c==b&&(e.loaded[d].pop(),a.info("THREE.js plugin "+b+" removed."))})}}}angular.module("threejs").factory("THREEPlugins",a),a.$inject=["$log","$document","$q","$rootScope"]}(),function(){"use strict";function a(a,b,c,d,e){var f={loaded:[]};return{load:function(a){b.debug(a);var c=this,e=[];return angular.forEach(a,function(a,b){for(var d=!0,g=f.loaded.length-1;g>=0;g--)f.loaded[b]==a&&(d=!1);if(d){var h=c.add(b,a);e.push(h)}}),d.all(e).then(function(a){return a.length>0&&b.debug("Images loaded: "+a),window.THREE})},add:function(a,c){var g=d.defer(),h=new THREE.LoadingManager;h.onProgress=function(a,c,d){b.debug(a,c,d)},h.onLoad=function(){e.$apply(function(){g.resolve(c)})};var i=new THREE.Texture,j=function(a){if(a.lengthComputable){var c=a.loaded/a.total*100;b.debug(Math.round(c,2)+"% downloaded")}},k=function(a){},l=new THREE.TextureLoader(h);return l.load(c,function(b){i=b,i.name=a,f.loaded.push(i)},j,k),g.promise},remove:function(a){angular.forEach(f.loaded,function(c,d){c==a&&(f.loaded[d].pop(),b.info("Removed "+a+" texture."))})},get:function(a){var c,d;if(void 0!==a||a!==!1)for(var e=f.loaded.length-1;e>=0;e--)f.loaded[e].name===a&&(c=f.loaded[e],d=!0,b.info('Texture "'+a+'" found!'));return d||(c=f.loaded[0],b.warn('Texture "'+a+'" not found: returning "'+c.name+'."')),b.debug(c),c}}}angular.module("threejs").factory("THREETextures",a),a.$inject=["THREEService","$log","$document","$q","$rootScope"]}(),function(){angular.module("validation.rule",["validation"]).config(["$validationProvider",function(a){var b={required:function(a){return!!a},url:/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[-;:&=\+\$,\w]+@)?[A-Za-z0-9.-]+|(?:www.|[-;:&=\+\$,\w]+@)[A-Za-z0-9.-]+)((?:\/[\+~%\/.\w-_]*)?\??(?:[-\+=&;%@.\w_]*)#?(?:[\w]*))?)/,email:/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/,number:/^\d+$/,minlength:function(a,b,c,d,e){return a.length>=e},maxlength:function(a,b,c,d,e){return a.length<=e}},c={required:{error:"This should be Required!!",success:"It's Required"},url:{error:"This should be Url",success:"It's Url"},email:{error:"This should be Email",success:"It's Email"},number:{error:"This should be Number",success:"It's Number"},minlength:{error:"This should be longer",success:"Long enough!"},maxlength:{error:"This should be shorter",success:"Short enough!"}};a.setExpression(b).setDefaultMsg(c)}])}.call(this),function(){angular.module("validation",["validation.provider","validation.directive"])}.call(this),function(){angular.module("validation.provider",[]).provider("$validation",function(){var a,b,c,d,e,f=this,g=function(f){a=f,b=a.get("$rootScope"),c=a.get("$http"),d=a.get("$q"),e=a.get("$timeout")},h={},i={};this.setExpression=function(a){return angular.extend(h,a),f},this.getExpression=function(a){return h[a]},this.setDefaultMsg=function(a){return angular.extend(i,a),f},this.getDefaultMsg=function(a){return i[a]},this.setErrorHTML=function(a){return a.constructor===Function?(f.getErrorHTML=a,f):void 0},this.getErrorHTML=function(a){return'<p class="validation-invalid">'+a+"</p>"},this.setSuccessHTML=function(a){return a.constructor===Function?(f.getSuccessHTML=a,f):void 0},this.getSuccessHTML=function(a){return'<p class="validation-valid">'+a+"</p>"},this.showSuccessMessage=!0,this.showErrorMessage=!0,this.checkValid=function(a){return void 0===a.$valid?!1:a&&a.$valid===!0},this.validate=function(a){var c=d.defer(),g=0;if(void 0===a)return console.error("This is not a regular Form name scope"),c.reject("This is not a regular Form name scope"),c.promise;if(a.validationId)b.$broadcast(a.$name+"submit-"+a.validationId,g++);else if(a.constructor===Array)for(var h in a)b.$broadcast(a[h].$name+"submit-"+a[h].validationId,g++);else for(var i in a)"$"!==i[0]&&a[i].hasOwnProperty("$dirty")&&b.$broadcast(i+"submit-"+a[i].validationId,g++);return c.promise.success=function(a){return c.promise.then(function(b){a(b)}),c.promise},c.promise.error=function(a){return c.promise.then(null,function(b){a(b)}),c.promise},e(function(){f.checkValid(a)?c.resolve("success"):c.reject("error")}),c.promise},this.validCallback=null,this.invalidCallback=null,this.reset=function(a){if(void 0===a)return void console.error("This is not a regular Form name scope");if(a.validationId)b.$broadcast(a.$name+"reset-"+a.validationId);else if(a.constructor===Array)for(var c in a)b.$broadcast(a[c].$name+"reset-"+a[c].validationId);else for(var d in a)"$"!==d[0]&&a[d].hasOwnProperty("$dirty")&&b.$broadcast(d+"reset-"+a[d].validationId)},this.$get=["$injector",function(a){return g(a),{setErrorHTML:this.setErrorHTML,getErrorHTML:this.getErrorHTML,setSuccessHTML:this.setSuccessHTML,getSuccessHTML:this.getSuccessHTML,setExpression:this.setExpression,getExpression:this.getExpression,setDefaultMsg:this.setDefaultMsg,getDefaultMsg:this.getDefaultMsg,showSuccessMessage:this.showSuccessMessage,showErrorMessage:this.showErrorMessage,checkValid:this.checkValid,validate:this.validate,validCallback:this.validCallback,invalidCallback:this.invalidCallback,reset:this.reset}}]})}.call(this),function(){angular.module("validation.directive",["validation.provider"]).directive("validator",["$injector",function(a){var b=a.get("$validation"),c=a.get("$q"),d=a.get("$timeout"),e=function(a,c,d,e,f){var g,h=c||b.getDefaultMsg(d).success;return g=e.messageId?angular.element(document.querySelector("#"+e.messageId)):a.next(),b.showSuccessMessage&&h?(g.html(b.getSuccessHTML(h)),g.css("display","")):g.css("display","none"),f.$setValidity(f.$name,!0),e.validCallback&&e.validCallback(),b.validCallback&&b.validCallback(a),!0},f=function(a,c,d,e,f){var g,h=c||b.getDefaultMsg(d).error;return g=e.messageId?angular.element(document.querySelector("#"+e.messageId)):a.next(),b.showErrorMessage&&h?(g.html(b.getErrorHTML(h)),g.css("display","")):g.css("display","none"),f.$setValidity(f.$name,!1),e.invalidCallback&&e.invalidCallback(),b.invalidCallback&&b.invalidCallback(a),!1},g=!1,h=function(a,d,g,i,j,k){var l=j.slice(0),m=l[0].trim(),n=m.indexOf("="),o=-1===n?m:m.substr(0,n),p=-1===n?null:m.substr(n+1),q=l.slice(1),r=o+"SuccessMessage",s=o+"ErrorMessage",t=b.getExpression(o),u={success:function(){return e(d,g[r],o,a,i),q.length?h(a,d,g,i,q,k):!0},error:function(){return f(d,g[s],o,a,i)}};return void 0===t?(console.error('You are using undefined validator "%s"',o),q.length?h(a,d,g,i,q,k):void 0):t.constructor===Function?c.all([b.getExpression(o)(k,a,d,g,p)]).then(function(a){return a&&a.length>0&&a[0]?u.success():u.error()},function(){return u.error()}):t.constructor===RegExp&&void 0!==k&&null!==k&&b.getExpression(o).test(k)?u.success():u.error()},i=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)},j=function(){return i()+i()+i()+i()};return{restrict:"A",require:"ngModel",scope:{model:"=ngModel",initialValidity:"=initialValidity",validCallback:"&",invalidCallback:"&",messageId:"@"},link:function(a,b,c,e){var f,i=function(){},k=c.validator.split(","),l=e.validationId=j();"boolean"==typeof a.initialValidity&&(f=a.initialValidity),a.messageId||b.after("<span></span>"),e.$setValidity(e.$name,f),a.$on(e.$name+"reset-"+l,function(){i(),g=!1,e.$setViewValue(""),e.$setPristine(),e.$setValidity(e.$name,void 0),e.$render(),a.messageId?angular.element(document.querySelector("#"+a.messageId)).html(""):b.next().html("")}),function(){return a.$on(e.$name+"submit-"+l,function(d,f){var j=e.$viewValue,l=!1;0===f&&(g=!1),l=h(a,b,c,e,k,j),"submit"===c.validMethod&&(i(),i=a.$watch("model",function(d,f){d!==f&&((void 0===d||null===d)&&(d=""),l=h(a,b,c,e,k,d))})),g||l||(g=!0,b[0].focus())}),"blur"===c.validMethod?void b.bind("blur",function(){var d=e.$viewValue;a.$apply(function(){h(a,b,c,e,k,d)})}):void("submit"!==c.validMethod&&"submit-only"!==c.validMethod&&a.$watch("model",function(d){if(e.$pristine&&e.$viewValue)e.$setViewValue(e.$viewValue);else if(e.$pristine)return void(a.messageId?angular.element(document.querySelector("#"+a.messageId)).html(""):b.next().html(""));h(a,b,c,e,k,d)}))}(),d(function(){c.$observe("noValidationMessage",function(c){var d;d=a.messageId?angular.element(document.querySelector("#"+a.messageId)):b.next(),"true"==c||c===!0?d.css("display","none"):("false"==c||c===!1)&&d.css("display","block")})})}}}]).directive("validationSubmit",["$injector",function(a){var b=a.get("$validation"),c=a.get("$timeout"),d=a.get("$parse");return{priority:1,require:"?ngClick",link:function(a,e,f){var g=d(f.validationSubmit)(a);c(function(){e.off("click"),e.on("click",function(c){c.preventDefault(),b.validate(g).success(function(){d(f.ngClick)(a)})})})}}}]).directive("validationReset",["$injector",function(a){var b=a.get("$validation"),c=a.get("$timeout"),d=a.get("$parse");return{link:function(a,e,f){var g=d(f.validationReset)(a);c(function(){e.on("click",function(a){a.preventDefault(),b.reset(g)})})}}}])}.call(this);